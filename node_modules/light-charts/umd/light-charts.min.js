/*!
 * light-charts v1.1.3 - https://weilun0510.github.io/light-charts-docs
 * MIT Licensed
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.ReactLoadingButton=e(require("react")):t.ReactLoadingButton=e(t.React)}(window,(function(t){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(e,n){e.exports=t},function(t,e,n){t.exports=n(4)},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e),n.d(e,"Test",(function(){return i})),n.d(e,"KLine",(function(){return L})),n.d(e,"Bar",(function(){return I})),n.d(e,"Line",(function(){return D}));var o=n(0),r=n.n(o);function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var i=function(t){var e,n;function o(){return t.apply(this,arguments)||this}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n),o.prototype.render=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome to React components"))},o}(o.Component),l=(n(2),"#207BF7"),c="#FF3333",u="#46B262",f="#FDFDFD",s="#FFF",h="#333",d="#FF3333",g="#FFFFFF",v="#F3F5FB",p="#C5C5C5",y="#C9C9C9",m="#FAB339",b="#FF752A",x="#207BF7",w=function(t,e,n,o){void 0===n&&(n="auto"),void 0===o&&(o="auto");var r=t.getContext("2d"),a=+e.width.slice(0,-2),i=+e.height.slice(0,-2);t.style.width=a+"px",t.style.height=i+"px";var l=k(r);return t.width=a*l,t.height=i*l,r.scale(l,l),{width:"auto"===n?a:a*n,height:"auto"===o?i:i*n}},S=function(t,e,n,o,r,a,i){void 0===a&&(a=COLOR.BLACK),void 0===i&&(i=.2),t.beginPath(),t.moveTo(e,n),t.lineTo(o,r),t.strokeStyle=a,t.lineWidth=i,t.stroke(),t.closePath()},C=function(t,e,n,o,r,a,i){void 0===r&&(r="left"),void 0===a&&(a="#FFF"),void 0===i&&(i="12px"),t.fillStyle=a,t.textBaseline="middle",t.textAlign=r,t.font=i+" Arial",t.fillText(o,e,n)},P=function(t,e,n,o,r){return void 0===r&&(r=2),(n+t*((e-n)/o)).toFixed(r)},E=function(t,e,n){return e+t*n},M=function(t,e,n,o){return o/(e-n)*(t-n)},k=function(t){var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},T=function t(e,n){void 0===e&&(e={}),void 0===n&&(n={});var o={};for(var r in e)"[object Object]"===Object.prototype.toString.call(n[r])?o[r]=t(e[r],n[r]):o[r]=n[r]||e[r];return o},B=function(t,e){return{x:t,y:e}},O=function(t,e,n){var o=B(t.x+e,t.y),r=B(t.x+t.width,t.y),a=B(t.x+t.width,t.y+t.height),i=B(t.x,t.y+t.height),l=B(t.x,t.y);n.beginPath(),n.moveTo(o.x,o.y),n.arcTo(r.x,r.y,a.x,a.y,e),n.arcTo(a.x,a.y,i.x,i.y,e),n.arcTo(i.x,i.y,l.x,l.y,e),n.arcTo(l.x,l.y,o.x,o.y,e),n.stroke()};function F(){return(F=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function A(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var L=r.a.memo((function(t){var e=t.option,n=void 0===e?{}:e,a=t.loadData,i=t.style,l=void 0===i?{width:"600px",height:"300px"}:i,f=T({avgList:[5,10,20],showTips:!0,canDrag:!0,canScroll:!0,pageSize:40,maxShowSize:80,yAxisSplitNumber:4,backgroundColor:g,xAxisItemMaxShowNumber:5,grid:{left:30,right:30,top:20,bottom:20,height:"auto",width:"auto"},axisTick:{length:5,show:!0}},n),k=f.yAxisSplitNumber,B=f.grid,j=f.axisTick.length,L=f.avgList,I=f.showTips,D=f.canDrag,R=f.canScroll,X=f.pageSize,Y=f.maxShowSize,N=f.backgroundColor,_=f.xAxisItemMaxShowNumber,z=Object(o.useState)((function(){var t=new Map([]),e={5:m,10:b,20:x};return L.forEach((function(n){t.set(n,{color:e[n],curVal:"",list:[]})})),t})),W=z[0],q=z[1],V=[],K=[],U=[],$="",G="",H="",J="",Q="",Z="",tt="",et="",nt=!0,ot=B.left,rt=B.top,at="",it=X,lt="",ct=function(t,e,n){var o=n/2,r=t.highestPrice,a=t.lowestPrice,i=t.openingPrice,l=t.closingPrice,f=void 0,s=void 0,h=void 0;l<i?(h=c,f=l,s=i):(h=u,f=i,s=l),S($,e,r,e,f,h,1),S($,e,a,e,s,h,1),$.beginPath(),$.moveTo(e-o,f),$.rect(e-o,f,n,s-f),$.fillStyle=h,h===c?$.stroke():$.fill()},ut=function(){console.log("绘制辅助线画布");var t=document.getElementById("tipCanvas"),e=t.getContext("2d"),n=Math.max.apply(Math,V.map((function(t){return t.highestPrice})))+5,o=Math.min.apply(Math,V.map((function(t){return t.lowestPrice})))-5;t.addEventListener("mousemove",(function(t){var r=t.offsetX,a=t.offsetY;if(e.clearRect(0,0,G,H),function(t){var e=t.offsetX,n=t.offsetY;return e>ot-lt/2&&e<G+lt/2-B.right-et/it&&n>B.top&&n<J}(t)){e.beginPath(),e.setLineDash([3,3]),e.moveTo(ot,a),e.lineTo(G-B.right-et/it,a),e.strokeStyle=y,e.stroke(),e.beginPath(),e.setLineDash([3,3]),e.moveTo(r,B.top),e.lineTo(r,J),e.strokeStyle=p,e.stroke(),e.beginPath(),e.rect(ot,a-10,50,20),e.fillStyle=y,e.fill(),C(e,ot+25,a,P(J-a,n,o,Q),"center",s),e.beginPath(),e.rect(r-25,J,50,20),e.fillStyle=y,e.fill();var i=Math.round((r-ot)/et*it);C(e,r,J+10,V.map((function(t){return t.date}))[i]||"","center",s);for(var l,c=A(W);!(l=c()).done;){var u=l.value,f=u[0],g=u[1].list[i];document.getElementById("avg"+f).innerText="MA"+f+" "+g}var m=rt+30,b=r+10;r>G/2-B.left&&(b=r-100-10),e.beginPath(),O({x:b,y:m,width:100,height:120},10,e),e.fillStyle=v,e.globalAlpha=.9,e.fill();var x=V[i],w=x.date,S=x.highestPrice,E=x.lowestPrice,M=x.openingPrice,k=x.closingPrice;[{label:"时间",value:w}].concat([{label:"开盘",value:M},{label:"收盘",value:k},{label:"最高",value:S},{label:"最低",value:E}]).forEach((function(t,n){var o=t.label,r=t.value,a=m+20+20*n;C(e,b+10,a,o,"left",h,"13px"),C(e,b+100-10,a,r,"right",0!==n?h:d,"13px")}))}}),!1)},ft=function(){var t=0,e=0,n="";document.addEventListener("dragstart",(function(t){document.getElementById("tipCanvas").getContext("2d").clearRect(0,0,G,H),e=t.offsetX,n=t.offsetX}),!1),document.addEventListener("drag",(function(o){var r=o.offsetX;if(!(r<0)){if(t=Math.abs(r-e),document.getElementById("draggable").style.cursor="grabbing",t>at){if(n!==r)if(console.log("拖拽中...."),n<r){if(0===K.length)return;V.unshift(K.pop()),U.unshift(V.pop())}else{if(0===U.length)return;V.push(U.shift()),K.push(V.shift())}e=r,$.clearRect(0,0,G,H),ht()}n=r}}),!1),document.addEventListener("dragend",(function(){console.log("-------拖拽结束");var t=document.getElementById("draggable");t.style.display="none",t.style.cursor="default",K.length<Y&&(console.log("leftDataSource",K),console.log("request: 左侧数据小于"+Y+"条，请求左侧数据，并赋值给myLeftDataSource.current"),a(Y,K[0].date).then((function(t){K=[].concat(t,K)})))}),!1),tipCanvas.addEventListener("mousedown",(function(t){var e=document.getElementById("canvasWrap"),n=document.getElementById("draggable");if(n)return n.style.display="block",void(n.style.cursor="grab");var o=document.createElement("div");o.style.position="absolute",o.style.zIndex="10",o.style.left=B.left+"px",o.style.top=B.top+"px",o.style.width=G-B.left-B.right+"px",o.style.height=H-B.top-B.bottom+"px",o.style.cursor="grab",o.setAttribute("id","draggable"),o.setAttribute("draggable","true"),e.appendChild(o),o.addEventListener("mouseup",(function(t){o.style.display="none"}))}),!1)},st=function(){var t=document.getElementById("canvasWrap"),e=null;t.addEventListener("wheel",(function(t){var n=t.deltaX,o=t.deltaY;if(console.log(Date.now()),0!==Math.abs(n)&&0!==Math.abs(o))return console.log("没有固定方向");if(n<0)return console.log("向右");if(n>0)return console.log("向左");if(o>0){if(V.length<=X)return;K.push(V.shift()),U.unshift(V.pop())}if(o<0){if(V.length>=Y)return;V=[K.pop()].concat(V)}e&&clearTimeout(e);e=setTimeout((function(){console.warn("wheelStop"),K.length<Y&&a(Y,V[0].date).then((function(t){K=[].concat(t,K)}))}),500),$.clearRect(0,0,G,H),ht()}),!1)},ht=function(){if(0!==V.length){it=V.length,at=et/it;lt=(et-3*(it-1))/it;var t=Math.max.apply(Math,V.map((function(t){return t.highestPrice})))+5,e=Math.min.apply(Math,V.map((function(t){return t.lowestPrice})))-5;console.log("--------开始绘制k线图");for(var n=function(n){return J-M(n,t,e,Q)},o=V.map((function(t){var e={};for(var o in t)"date"!==o&&(e[o]=n(t[o]));return e})),r=0;r<k;r++){var a=J-Z*r;S($,ot,a,tt,a,y)}for(var i=Math.ceil(it/(_-1)),l=0;l<it;l++){var c=E(l,ot,at);l%i==0&&(C($,c,J+j+10,V.map((function(t){return t.date}))[l],"center",h),S($,c,J,c,J+j,y),S($,c,J,c,rt,y))}for(var u,f=function(t,e){$.beginPath();for(var n=0;n<t.length;n++){var o=t[n],r=o.curX,a=o.curY,i=o.prevControlX,l=o.prevControlY;if(n>0&&n<t.length){var c=t[n-1];$.bezierCurveTo(c.nextControlX,c.nextControlY,i,l,r,a),$.strokeStyle=e,$.lineWidth=.7}else 0===n&&$.moveTo(r,a)}$.stroke()},s=function(t){for(var e=[],o=function(t){var e=[];return V.map((function(n,o){var r=(o<t?[].concat(K.slice(-t+o),V.slice(0,o)):[].concat(V.slice(o-t,o))).reduce((function(t,e){return t+e.openingPrice}),0);e.push(r/t),o===V.length-1&&q(W.set(t,F({},W.get(t),{curVal:r/t})))})),q(W.set(t,F({},W.get(t),{list:e}))),e.map((function(t){return n(t)}))}(t),r=0;r<it;r++){var a=E(r,ot,at),i=o[r],l=0,c=0;0===r?(l=i+1,c=o[r+1]):r===it-1?(l=o[r-1],c=i+1):(l=o[r-1],c=o[r+1]);var u=Math.abs(c-l),f=2*at,s=Math.sqrt(Math.pow(u,2)+Math.pow(f,2)),h=.5*at,d=h*f/s,g=h*u/s,v=void 0,p=void 0;l<c?(v=i-g/2,p=i+g/2):(v=i+g/2,p=i-g/2),e.push({curX:a,curY:i,prevControlX:a-d/2,prevControlY:v,nextControlX:a+d/2,nextControlY:p})}return e},d=A(W);!(u=d()).done;){var g=u.value,v=g[0],p=g[1];f(s(v),p)}nt?(!function(t,e){for(var n=0,o=t.length;n<o;n++)!function(n){setTimeout((function(){ct(t[n],E(n,ot,at),e)}),100*n)}(n)}(o,lt),I&&ut(),D&&ft(),R&&st()):function(t,e){for(var n=0,o=t.length;n<o;n++)ct(t[n],E(n,ot,at),e)}(o,lt),console.log("绘制完成"),nt=!1}};return Object(o.useLayoutEffect)((function(){var t=document.getElementById("canvas"),e=document.getElementById("tipCanvas");if(t.getContext){$=t.getContext("2d");var n=w(t,l,B.width,B.height),o=n.width,r=n.height;w(e,l,B.width,B.height),G=o,H=r,J=r-B.bottom,Q=r-(B.top+B.bottom),Z=Q/(k-1),tt=o-B.left,et=o-B.left-B.right,at=et/it,a(X+Y).then((function(t){var e=t;V=e.slice(Y),K=e.slice(0,Y),ht()}))}else console.error("该浏览器不支持展示<canvas>标签")}),[]),console.log("-----------render--------------"),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"labels-container"},r.a.createElement("span",{className:"abg-label"},"均线"),L.map((function(t){var e=W.get(t),n=e.color,o=e.curVal;return r.a.createElement("span",{key:"avg"+t,style:{color:n},id:"avg"+t},"MA"+t+" "+o)}))),r.a.createElement("div",{id:"canvasWrap"},r.a.createElement("canvas",{id:"canvas",style:{backgroundColor:N}}),r.a.createElement("canvas",{id:"tipCanvas"})))})),I=(n(3),function(t){var e=t.option,n=void 0===e?{}:e,a=t.style,i=void 0===a?{width:"600px",height:"300px"}:a,c=T({yData:[],xData:[],yAxisSplitNumber:5,backgroundColor:g,grid:{left:30,right:30,top:30,bottom:30,height:"auto",width:"auto"},axisTick:{length:5,show:!0}},n),u=c.yData,s=c.xData,d=c.yAxisSplitNumber,v=c.grid,p=c.axisTick,m=p.length,b=p.show,x=c.backgroundColor,k="",B="",F="",A="",j="",L="",I="",D="",R="",X=v.left,Y=v.top,N=function(){console.log("绘制辅助线画布");var t=document.getElementById("tipCanvas"),e=t.getContext("2d");t.addEventListener("mousemove",(function(t){var n=t.offsetX,o=t.offsetY;if(e.clearRect(0,0,k,B),function(t){var e=t.offsetX,n=t.offsetY;return e>X&&e<k-v.right&&n>v.top&&n<D}(t)){var r=Math.floor((n-X)/A*R),a=s[r],i=u[r],c=A/R,f=E(r,X,c),d=n+10;n>k/2-v.left&&(d=n-100-10),e.beginPath(),e.moveTo(f,Y),e.rect(f,Y,c,F),e.fillStyle=l,e.globalAlpha=.1,e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fill(),e.closePath(),e.beginPath(),O({x:d,y:o+10,width:100,height:50},5,e),e.fillStyle=g,e.globalAlpha=1,e.shadowColor=y,e.shadowBlur=8,e.shadowOffsetX=1,e.shadowOffsetY=1,e.fill();var p=o+10+25;C(e,d+10,p,a,"left",h,"13px"),C(e,d+60,p,i,"left",h,"14px")}}),!1)};return Object(o.useLayoutEffect)((function(){var t=document.getElementById("canvas"),e=document.getElementById("tipCanvas");if(t.getContext){var n=t.getContext("2d"),o=w(t,i,v.width,v.height),r=o.width,a=o.height;w(e,i,v.width,v.height),k=r,B=a,F=a-(v.top+v.bottom),L=a-v.bottom,j=F/(d-1),I=r-v.left,A=r-v.left-v.right,D=a-v.bottom,u.length&&function(t){R=s.length;for(var e=Math.max.apply(Math,u)+20,n=A/R,o=(A-30*(R-1))/R,r=0;r<d;r++){var a=L-j*r;C(t,X-10,a,P(r*j,e,0,F,0),"right",h),S(t,X,a,I,a,y)}var i=Math.ceil(R/19);S(t,X,L,I,L,f);for(var c=0;c<R;c++){var g=E(c,X,n);c%i==0&&(C(t,g+n/2,L+m+10,s[c],"center",h),b&&S(t,g,L,g,L+m,y))}for(var v=[],p=0;p<R;p++){var x=u[p],w=E(p,X,n)+15,k=L-M(x,e,0,F);v.push({x:w,y:k})}for(var T=0;T<R;T++){var B=u[T],D=v[T],Y=D.x,_=D.y,z=M(B,e,0,F);t.beginPath(),O({x:Y,y:_,width:o,height:z},3,t),t.fillStyle=l,t.globalAlpha=.9,t.fill()}N()}(n)}else console.error("该浏览器不支持展示<canvas>标签")}),[u]),r.a.createElement("div",{id:"canvasWrap"},r.a.createElement("canvas",{id:"canvas",style:{backgroundColor:x}}),r.a.createElement("canvas",{id:"tipCanvas"}))}),D=function(t){var e=t.option,n=void 0===e?{}:e,a=t.style,i=void 0===a?{width:"600px",height:"300px"}:a,c=T({yData:[],xData:[],yAxisSplitNumber:5,backgroundColor:g,grid:{left:30,right:30,top:30,bottom:30,height:"auto",width:"auto"},axisTick:{length:5,show:!0}},n),u=c.yData,s=c.xData,d=c.yAxisSplitNumber,v=c.grid,p=c.axisTick,m=p.length,b=p.show,x=c.backgroundColor,k="",B="",O="",F="",A="",j=v.left;return Object(o.useLayoutEffect)((function(){var t=document.getElementById("canvas"),e=t.getContext("2d"),n=w(t,i,v.width,v.height),o=n.width,r=n.height;k=r-(v.top+v.bottom),F=r-v.bottom,O=k/(d-1),A=o-v.left,B=o-v.left-v.right,u.length&&function(t){for(var e=s.length,n=B/e,o=n/2,r=Math.max.apply(Math,u),a=Math.min.apply(Math,u),i=0;i<d;i++){var c=F-O*i;C(t,j-10,c,P(i*O,r,a,k,0),"right",h),S(t,j,c,A,c,y)}S(t,j,F,A,F,f);for(var g=0;g<e;g++){var v=E(g,j,n);C(t,v+o,F+m+10,s[g],"center",h),b&&S(t,v,F,v,F+m,y)}for(var p=[],x=0;x<e;x++){var w=u[x],T=E(x,j,n)+o,L=F-M(w,r,a,k);p.push({x:T,y:L})}for(var I=0;I<p.length-1;I++){var D=p[I],R=D.x,X=D.y,Y=p[I+1],N=Y.x,_=Y.y;S(t,R,X,N,_,l,1),t.beginPath(),t.arc(R,X,1,0,2*Math.PI,!0),t.fillStyle=l,t.fill()}}(e)}),[u]),r.a.createElement("canvas",{id:"canvas",style:{backgroundColor:x}})}}]).default}));
//# sourceMappingURL=light-charts.min.js.map